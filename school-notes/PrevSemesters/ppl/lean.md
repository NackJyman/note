# Finley Talks about LEAN
##### Principles of Programming Languages
###### April 19th, 2022
---

### Assignment Expression

```hs 
typecheck :: Program -> Either String Program
typecheck (PDefs defs) = do
	defs' <- (mapM typecheckDef defs)
	return (PDefs defs')
	
typecheckDef :: PDefs -> Eitther String PDefs
typecheckDef = 
```

You can use printTree' (if you used etype) to check your annotated tree.

---

### Finley is going to show an environment

Needs to store a number of things.

```hs 
data CmpEnv = CmpEnv (Map Id Integer) Integer (Map Id (Type, [Type]) Integer [String] deriving (Show)

getMem :: CmpEnv -> Map Id Integer
getMem (CmpEnv mem _ _ _ _) = mem

-- Record Types are cool (And better)

data CmpEnv = CmpEnv {
 	mem 			 :: Map Id Integer,
 	freshAddr  :: Integer,
 	funs 			 :: Map Id (Type, [Type]),
 	freshLabel :: Integer,
 	code 			 :: [String]
 }
 deriving (Show)

type CompilteT a = StateT CmpEnv Identity a

-- Or

type CompileT a = State CmpEnv a

-- takes code we are accumulating and appends to the list.
-- Lazy evaluation makes this function suck.
emit :: String -> CompileT ()
emit c = do 
	env <- get
	let curCode = code env
	put (env { code = curCode ++ [c] })
	
-- or somethin like this
emit :: String -> CompileT ()
emit c = modify (\env -> env { code = code env ++ [c] })

lookupC :: Id -> CompileT Integer
lookupC ident = do 
	m <- gets mem
	return (fromJust (Map.lookup ident m))
	
declareC :: Id -> Type -> CompileT Integer
ceclareC ident t = do
	addr <- gets freshAddr
	modify (\env -> env { 
							mem = Map.insert ident addr (mem env),
							freshAddr = addr + tySize t
						})

```


---

### iwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadieiwannadie

---

###### April 21st, 2022

## Live Code Time

Last time he made environment and environment type, missing interpreter and compileT transformer

```hs

			Left err -> do
				putStrLn "Syntax Error"
				putStrLn err
				exitFailure
			Right tree -> case Right tree of
				Left typeErrorMsg -> putStrLn("type error")
				Right 
				



data CmpEnv = CmpEnv { 
	mem :: Map Id Integer, 
	freshAddr :: Integer, 
	funs :: Map Id (Type, [Type]), 
	freshLabel :: Integer, 
	code :: [String] 
	} 
	deriving (Show)

type CompileT a = State CmpEnv (Writer [String]) a

buildEnv :: Program -> CmpEnv -> CmpEnv
buildEnv (PDefs []) env = env
buildEnv (PDefs ((DFun ty fid args body):ds)) env = 
	buildEnv
		(PDefs ds) env { funs = Map.insert fid (ty, map (\(ADecl ty _) -> ty) args) (funs env) }

emptyEnv :: CmpEnv
emptyEnv = CmpEnv {mem=Map.empty,freshAddr=0,funs=Map.empty, freshLabel=0}

compile :: Program -> [String]
compile prog = do 
	initEnv <- buildEnv prog emptyEnv
	_
	
-- Different compile function
compile :: Program -> [String]
compile prog@(PDefs defs) = snd (runWriter (runStateT (compileProg prog) (buildEnv prog emptyEnv)))


compileProg :: Program -> CompileT ()
compileProg prog = let
	initEnv <- buildEnv prog emptyEnv
	in do
		emit ".class public cpp"
		emit ".super java/lang/Object"
		mapM_ compileDef defs

		
compileDef :: Def -> CompileT ()
compileDef (DFun ty fid args body) = do
	emit (".method public static" ++ fid ++ " : " ++ funType undefined)
	emit ".limit locals 100"
	emit ".limit stack 100000000"
	compileStms body
	emit ".end method"
	
compileStms _ = do
	emit "iload 5"
	emit "iload 10"
	emit "iadd"
	emit ""
	
funType :: (Type, [Type]) -> String
funType _ = "Something that is a function type"


		
	
define :: Id -> Value -> InterpretT ()

declare ::  

evalExp ::
```